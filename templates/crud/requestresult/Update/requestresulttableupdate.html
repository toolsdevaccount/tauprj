{% block content %}
{% load humanize %}
<div class="container-fluid">
	<div class="form-group">
		<div class="card">
			<div class="card-body">
				<div class="row">
					<div class="col" style="text-align: center;">量産区分</div>
					<div class="col" style="text-align: center;">出力区分</div>
					<div class="col" style="text-align: center;">担当者</div>
					<div class="col" style="text-align: center;">オーダーNO</div>
					<div class="col" style="text-align: center;">依頼日</div>
					<div class="col" style="text-align: center;">商品名</div>
					<div class="col" style="text-align: center;">番手</div>
					<div class="col" style="text-align: center;">手配先</div>	
				</div>
				<div class="row">
					<div class="col">
						<input type="tel" class="form-control" value="{{ object.SampleDiv.divname }}" readonly>
					</div>
					<div class="col">
						<input type="tel" class="form-control" value="{{ object.OutputDiv.outputdivname }}" readonly>
					</div>
					<div class="col">
						<input type="tel" class="form-control" value="{{ object.ManagerCode.first_name|add:object.ManagerCode.last_name }}" readonly>
					</div>
					<div class="col">
						<input type="tel" class="form-control" value="{{ form.SlipDiv.value }}{{ '-' }}{{ form.OrderNumber.value }}" readonly>
					</div>
					<div class="col">
						<input type="tel" class="form-control" value="{{ form.OrderingDate.value }}" readonly>
					</div>
					<div class="col">
						<input type="tel" class="form-control" value="{{ form.ProductName.value }}" readonly>
					</div>
					<div class="col">
						<input type="tel" class="form-control" value="{{ form.OrderingCount.value }}" readonly>
					</div>
					<div class="col">
						<input type="tel" class="form-control" value="{{ object.DestinationCode.CustomerOmitName }}" readonly>
					</div>	
				</div>
				<div class="row">
					<div class="col" style="text-align: center;">仕入先</div>
					<div class="col" style="text-align: center;">出荷先</div>
					<div class="col" style="text-align: center;">得意先</div>
					<div class="col" style="text-align: center;">依頼先</div>
					<div class="col" style="text-align: center;">アパレル</div>
					<div class="col" style="text-align: center;"></div>
					<div class="col" style="text-align: center;"></div>
					<div class="col" style="text-align: center;"></div>
					<!-- <div class="col" style="text-align: center;">原糸メーカー</div>
					<div class="col" style="text-align: center;">原糸出荷日</div>
					<div class="col" style="text-align: center;">マーク名</div>	-->
				</div>
				<div class="row">
					<div class="col">
						<input type="tel" class="form-control" value="{{ object.SupplierCode.CustomerOmitName }}" readonly>
					</div>
					<div class="col">
						<input type="tel" class="form-control" value="{{ object.ShippingCode.CustomerOmitName }}" readonly>
					</div>
					<div class="col">
						<input type="tel" class="form-control" value="{{ object.CustomeCode.CustomerOmitName }}" readonly>
					</div>
					<div class="col">
						<input type="tel" class="form-control" value="{{ object.RequestCode.CustomerOmitName }}" readonly>
					</div>
					<div class="col">
						<input type="tel" class="form-control" value="{{ object.ApparelCode.CustomerOmitName }}" readonly>
					</div>
					<div class="col">
						<!-- <input type="tel" class="form-control" value="{{ object.StainShippingCode.CustomerOmitName }}" readonly> -->
					</div>
					<div class="col">
						<!-- <input type="tel" class="form-control" value="{{ form.StainShippingDate.value | default_if_none:'' }}" readonly> -->
					</div>
					<div class="col">
						<!-- <input type="tel" class="form-control" value="{{ form.MarkName.value | default_if_none:'' }}" readonly> -->
					</div>
				</div>
			</div>
		</div>
	</div>
	<div class="form-group">
		{{ formset.management_form }}
		<div class="table-responsive table-container">
			<div class="table-sticky-container-small">
				<table class="table table-sticky-sm table-bordered" id="detailtblrow">
					<thead>
						<tr class="bg-info">
							<th scope="col" class="text-center check">&nbsp&nbsp</th>
							<th scope="col" class="text-center items">項番</th>
							<th scope="col" class="text-center coloritem">色番</th>
							<th scope="col" class="text-center coloritem">カラー</th>
							<th scope="col" class="text-center four">仕立</th>
							<th scope="col" class="text-center items">数量</th>
							<th scope="col" class="text-center items">単位</th>
							<th scope="col" class="text-center items">仕入単価</th>
							<th scope="col" class="text-center items">通常単価</th>
							<th scope="col" class="text-center items">UP分単価</th>
							<th scope="col" class="text-center items">販売単価</th>
							<th scope="col" class="text-center days">希望納期</th>
							<th scope="col" class="text-center days">回答納期</th>
							<th scope="col" class="text-center check">済</th>
							<th scope="col" class="text-center check">印</th>
							<th scope="col" class="text-center check">課税</th>
						</tr>
					</thead>
					<tbody>
						{% for form in formset %}
						<tr class="list_formset">
							<td class="tableid"></td>
								<input type="hidden" class="form-control OrderingId" data-id-format="id_OrderingTableId-%d-id" data-name-format="OrderingTableId-%d-id" id="id_OrderingTableId-{{ forloop.counter0 }}-id" name="OrderingTableId-{{ forloop.counter0 }}-id" value="{{ form.id.value }}">
							<td>
								<input type="tel" class="form-control DetailItemNumber" autocomplete="new-password" style="text-align: right;" data-id-format="id_OrderingTableId-%d-DetailItemNumber" data-name-format="OrderingTableId-%d-DetailItemNumber"
								name="OrderingTableId-{{ forloop.counter0 }}-DetailItemNumber" id="id_OrderingTableId-{{ forloop.counter0 }}-DetailItemNumber" value="{{ form.DetailItemNumber.value }}" readonly>
							</td>
							<td>
								<input type="text" class="form-control" autocomplete="new-password" data-id-format="id_OrderingTableId-%d-DetailColorNumber" data-name-format="OrderingTableId-%d-DetailColorNumber"
								name="OrderingTableId-{{ forloop.counter0 }}-DetailColorNumber" id="id_OrderingTableId-{{ forloop.counter0 }}-DetailColorNumber" value="{{ form.DetailColorNumber.value | default:'' }}" readonly>
							</td> 
							<td>
								<input type="text" class="form-control" autocomplete="new-password" data-id-format="id_OrderingTableId-%d-DetailColor" data-name-format="OrderingTableId-%d-DetailColor" 
								name="OrderingTableId-{{ forloop.counter0 }}-DetailColor" id="id_OrderingTableId-{{ forloop.counter0 }}-DetailColor" value="{{ form.DetailColor.value | default:'' }}" readonly>                              
							</td>
							<td>
								<input type="text" class="form-control" autocomplete="new-password" data-id-format="id_OrderingTableId-%d-DetailTailoring" data-name-format="OrderingTableId-%d-DetailTailoring" 
								name="OrderingTableId-{{ forloop.counter0 }}-DetailTailoring" id="id_OrderingTableId-{{ forloop.counter0 }}-DetailTailoring" value="{{ form.DetailTailoring.value | default:'' }}" readonly>                               
							</td>
							<td>
								<input type="tel" step="0.1" class="form-control DetailVolume text-right" autocomplete="new-password" data-id-format="id_OrderingTableId-%d-DetailVolume" data-name-format="OrderingTableId-%d-DetailVolume" 
								name="OrderingTableId-{{ forloop.counter0 }}-DetailVolume" id="id_OrderingTableId-{{ forloop.counter0 }}-DetailVolume" data-empty-val="false" value="{{ form.DetailVolume.value | intcomma }}" readonly>                               
							</td>
							<td>
								<select class="custom-select" data-id-format="id_OrderingTableId-%d-DetailUnitDiv" data-name-format="OrderingTableId-%d-DetailUnitDiv" name="OrderingTableId-{{ forloop.counter0 }}-DetailUnitDiv" id="id_OrderingTableId-{{ forloop.counter0 }}-DetailUnitDiv" readonly>
									{% for data in form.DetailUnitDiv %}
									{{ data }}
									{% endfor %}
								</select>
							</td>
							<td>
								<input type="tel" class="form-control DetailUnitPrice text-right" autocomplete="new-password" data-id-format="id_OrderingTableId-%d-DetailUnitPrice" data-name-format="OrderingTableId-%d-DetailUnitPrice" 
								name="OrderingTableId-{{ forloop.counter0 }}-DetailUnitPrice" id="id_OrderingTableId-{{ forloop.counter0 }}-DetailUnitPrice" data-empty-val="false" value="{{ form.DetailUnitPrice.value| intcomma }}" readonly>                             
							</td>
							<td class="DetailPrice">
								<input type="tel" class="form-control DetailPrice text-right" autocomplete="new-password" data-id-format="id_OrderingTableId-%d-DetailPrice" data-name-format="OrderingTableId-%d-DetailPrice" 
								name="OrderingTableId-{{ forloop.counter0 }}-DetailPrice" id="id_OrderingTableId-{{ forloop.counter0 }}-DetailPrice" data-empty-val="false" value="{{ form.DetailPrice.value| intcomma }}" readonly>
							</td>
							<td>
								<input type="tel" class="form-control DetailOverPrice text-right" autocomplete="new-password" data-id-format="id_OrderingTableId-%d-DetailOverPrice" data-name-format="OrderingTableId-%d-DetailOverPrice" 
								name="OrderingTableId-{{ forloop.counter0 }}-DetailOverPrice" id="id_OrderingTableId-{{ forloop.counter0 }}-DetailOverPrice" data-empty-val="false" value="{{ form.DetailOverPrice.value| intcomma }}" readonly>
							</td>
							<td>
								<input type="tel" class="form-control DetailSellPrice text-right" autocomplete="new-password" data-id-format="id_OrderingTableId-%d-DetailSellPrice" data-name-format="OrderingTableId-%d-DetailSellPrice" 
								name="OrderingTableId-{{ forloop.counter0 }}-DetailSellPrice" id="id_OrderingTableId-{{ forloop.counter0 }}-DetailSellPrice" data-empty-val="false" value="{{ form.DetailSellPrice.value| intcomma }}" readonly>
							</td>
							<td>
								<input type="tel" class="form-control SpecifyDeliveryDate flatpickr" autocomplete="new-password" data-id-format="id_OrderingTableId-%d-SpecifyDeliveryDate" data-name-format="OrderingTableId-%d-SpecifyDeliveryDate" 
								name="OrderingTableId-{{ forloop.counter0 }}-SpecifyDeliveryDate" id="id_OrderingTableId-{{ forloop.counter0 }}-SpecifyDeliveryDate" value="{{ form.SpecifyDeliveryDate.value | default_if_none:'' }}" disabled>                             
							</td>
							<td>
								<input type="tel" class="form-control StainAnswerDeadline flatpickr" autocomplete="new-password" data-id-format="id_OrderingTableId-%d-StainAnswerDeadline" data-name-format="OrderingTableId-%d-StainAnswerDeadline" 
								name="OrderingTableId-{{ forloop.counter0 }}-StainAnswerDeadline" id="idOrderingTableId-{{ forloop.counter0 }}-StainAnswerDeadline" value="{{ form.StainAnswerDeadline.value | default_if_none:'' }}" disabled>                              
							</td>
							<td class="text-center">
								<div class="form-check">
									{% if form.DeliveryManageDiv.value == 1 %}
									<input type="checkbox" class="form-check-input DeliveryManageDiv" data-id-format="id_OrderingTableId-%d-DeliveryManageDiv" data-name-format="OrderingTableId-%d-DeliveryManageDiv" 
									name="OrderingTableId-{{ forloop.counter0 }}-DeliveryManageDiv" id="id_OrderingTableId-{{ forloop.counter0 }}-DeliveryManageDiv" checked disabled>
									{% else %}
									<input type="checkbox" class="form-check-input DeliveryManageDiv" data-id-format="id_OrderingTableId-%d-DeliveryManageDiv" data-name-format="OrderingTableId-%d-DeliveryManageDiv" 
									name="OrderingTableId-{{ forloop.counter0 }}-DeliveryManageDiv" id="id_OrderingTableId-{{ forloop.counter0 }}-DeliveryManageDiv" disabled>
									{% endif %}
								</div>
							</td>
							<td class="text-center">
								<div class="form-check">
									{% if form.PrintDiv.value == 1 %}
									<input type="checkbox" class="form-check-input PrintDiv" data-id-format="id_OrderingTableId-%d-PrintDiv" data-name-format="OrderingTableId-%d-PrintDiv" 
									name="OrderingTableId-{{ forloop.counter0 }}-PrintDiv" id="id_OrderingTableId-{{ forloop.counter0 }}-PrintDiv" checked disabled>
									{% else %}
									<input type="checkbox" class="form-check-input PrintDiv" data-id-format="id_OrderingTableId-%d-PrintDiv" data-name-format="OrderingTableId-%d-PrintDiv" 
									name="OrderingTableId-{{ forloop.counter0 }}-PrintDiv" id="id_OrderingTableId-{{ forloop.counter0 }}-PrintDiv" disabled>
									{% endif %}
								</div>
							</td>
							<td class="text-center">
								<div class="form-check">
									{% if form.is_Taxation.value == 1 %}
									<input type="checkbox" class="form-check-input is_Taxation" data-id-format="id_OrderingTableId-%d-is_Taxation" data-name-format="OrderingTableId-%d-is_Taxation" 
									name="OrderingTableId-{{ forloop.counter0 }}-is_Taxation" id="id_OrderingTableId-{{ forloop.counter0 }}-is_Taxation" checked disabled>
									{% else %}
									<input type="checkbox" class="form-check-input is_Taxation" data-id-format="id_OrderingTableId-%d-is_Taxation" data-name-format="OrderingTableId-%d-is_Taxation" 
									name="OrderingTableId-{{ forloop.counter0 }}-is_Taxation" id="id_OrderingTableId-{{ forloop.counter0 }}-is_Taxation" disabled>
									{% endif %}
								</div>
							</td>
						</tr>
						{% endfor %}
					</tbody>
				</table>
			</div>
		</div>		
	</div>
	<div class="form-group">
		<div class="text-left">
			<button type="button" id="add" class="btn btn-info btn-sm list_add">追加</button>
		</div>
		<div class="table-responsive table-container">
			<div class="table-sticky-container-small">
				{{ inlinesRecord.management_form }}
				<table class="table table-sticky table-sm" id="tblrow">
					<thead>
						<tr class="bg-info">
							<th scope="col" class="text-center check"></th>
							<th scope="col" class="text-center check">削除</th>
							<th scope="col" class="text-center items">項番</th>
							<th scope="col" class="text-center days">実績日</th>
							<th scope="col" class="text-center days">出荷日</th>
							<th scope="col" class="text-center volumes">出荷数</th>
							<th scope="col" class="text-center days">伝票番号</th>
							<th scope="col" class="text-center">摘&nbsp&nbsp&nbsp&nbsp要</th>
							<th scope="col" class="text-center check">移動</th>
							<th scope="col" class="text-center check">目増</th>
							<th scope="col" class="text-center check">目減</th>
							<th scope="col" class="text-center check">&nbsp&nbsp</th>
						</tr>
					</thead>
					<tbody id="list">
						<tr class="list_var">
							<input type="hidden" data-id-format="id_OrderingId-%d-id" data-name-format="OrderingId-%d-id" name="OrderingId-0-id" id="id_OrderingId-0-id" value="{{ form.id.value }}">
							<td id="detail">
								<input type="hidden" data-id-format="id_OrderingId-%d-OrderingDetailId" data-name-format="OrderingId-%d-OrderingDetailId" name="OrderingId-0-OrderingDetailId" id="id_OrderingId-0-OrderingDetailId" value="{{ form.OrderingDetailId.value }}">
							</td>
							<td class="text-center">
								<div class="form-check">
									<input type="checkbox" class="form-check-input position-static" data-id-format="id_OrderingId-%d-DELETE" data-name-format="OrderingId-%d-DELETE" id="id_OrderingId-0-DELETE" name="OrderingId-0-DELETE">
								</div>
							</td>
							<td>
								<div id="div" class="fds-table__td-content">
									<input type="tel" class="form-control ResultItemNumber" autocomplete="new-password" style="text-align: right;" data-id-format="id_OrderingId-%d-ResultItemNumber" data-name-format="OrderingId-%d-ResultItemNumber"
									name="OrderingId-0-ResultItemNumber" id="id_OrderingId-0-ResultItemNumber" value="{{ form.ResultItemNumber.value  | default:'0001' }}">
								</div>
							</td>
							<td>
								<input type="tel" class="form-control ResultDate flatpickr" autocomplete="new-password" data-id-format="id_OrderingId-%d-ResultDate" data-name-format="OrderingId-%d-ResultDate" 
								name="OrderingId-0-ResultDate" id="id_OrderingId-0-ResultDate" value="{{ form.ResultDate.value | default:'' }}">                                   
							</td>
							<td>
								<input type="tel" class="form-control ShippingDate flatpickr" autocomplete="new-password" data-id-format="id_OrderingId-%d-ShippingDate" data-name-format="OrderingId-%d-ShippingDate" 
								name="OrderingId-0-ShippingDate" id="id_OrderingId-0-ShippingDate" value="{{ form.ShippingDate.value | default:'' }}">
							</td>
							<td>
								<input type="tel" step="0.1" class="form-control ShippingVolume text-right" autocomplete="new-password" data-id-format="id_OrderingId-%d-ShippingVolume" data-name-format="OrderingId-%d-ShippingVolume" 
								name="OrderingId-0-ShippingVolume" id="id_OrderingId-0-ShippingVolume" onchange="financial_shipp(this);" value="{{ form.ShippingVolume.value | intcomma | default:'0.00' }}">                                   
							</td>
							<td>
								<input type="tel" class="form-control SlipNumber text-right" autocomplete="new-password" data-id-format="id_OrderingId-%d-SlipNumber" data-name-format="OrderingId-%d-SlipNumber" 
								name="OrderingId-0-SlipNumber" id="id_OrderingId-0-SlipNumber" value="{{ form.SlipNumber.value | default_if_none:"" }}">                                   
							</td>
							<td>
								<input type="text" class="form-control" autocomplete="new-password" data-id-format="id_OrderingId-%d-ResultSummary" data-name-format="OrderingId-%d-ResultSummary" 
								name="OrderingId-0-ResultSummary" id="id_OrderingId-0-ResultSummary" value="{{ form.ResultSummary.value | default_if_none:"" }}">                                   
							</td>
							<td class="text-center">
								<div class="form-check">
									<input type="checkbox" class="form-check-input position-static ResultMoveDiv" data-id-format="id_OrderingId-%d-ResultMoveDiv" data-name-format="OrderingId-%d-ResultMoveDiv" id="id_OrderingId-0-ResultMoveDiv" name="OrderingId-0-ResultMoveDiv">
								</div>
							</td>
							<td class="text-center">
								<div class="form-check">
									<input type="checkbox" class="form-check-input position-static ResultGainDiv" data-id-format="id_OrderingId-%d-ResultGainDiv" data-name-format="OrderingId-%d-ResultGainDiv" id="id_OrderingId-0-ResultGainDiv" name="OrderingId-0-ResultGainDiv">
								</div>
							</td>
							<td class="text-center">
								<div class="form-check">
									<input type="checkbox" class="form-check-input position-static ResultDecreaseDiv" data-id-format="id_OrderingId-%d-ResultDecreaseDiv" data-name-format="OrderingId-%d-ResultDecreaseDiv" id="id_OrderingId-0-ResultDecreaseDiv" name="OrderingId-0-ResultDecreaseDiv">
								</div>
							</td>
							<td>
								<span class="list_del"><button type="button" class="btn btn-outline-danger btn-sm">削除</button></span>
							</td>
						</tr>
					</tbody>
				</table>
			</div>
		</div>
	</div>
</div>
<!-- Datepicker 追加-->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
<script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
<script src="https://cdn.jsdelivr.net/npm/flatpickr/dist/l10n/ja.js"></script>
<script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/jquery.add-input-area@4.11.0/dist/jquery.add-input-area.min.js" integrity="sha256-yOwGvcRp3I8/XWkeARhJkgdfLREQygbFA5W2bUpM2FY=" crossorigin="anonymous"></script>
{% load static %}
<script src="{% static '\js\datepicker.js' %}" charset="UTF-8"></script>
<script src="{% static '\js\datalist.js' %}" charset="UTF-8"></script>
<script src="{% static '\js\calc.js' %}" charset="UTF-8"></script>
<script src="{% static '\js\inputareaRequest.js' %}" charset="UTF-8"></script>
<script src="{% static '\js\commarequest.js' %}" charset="UTF-8"></script>
<script src="{% static '\js\tab.js' %}" charset="UTF-8"></script>
<script src="{% static '\js\enter.js' %}" charset="UTF-8"></script>
<script src="{% static '\js\tableborder.js' %}" charset="UTF-8"></script>
<script src="{% static '\js\requestresultfirst.js' %}" charset="UTF-8"></script>
<script>
$('.tableid').on('click', function(){
    var idx=$(this).closest('tr').prop('rowIndex');
    var id = document.querySelectorAll(".OrderingId")[idx -1].value;
    var item = document.querySelectorAll(".DetailItemNumber")[idx -1].value;
    var texthtml = '';

    $('#list').empty();

    // Ajax通信を開始
    $.ajax({
        url: "{% url 'myapp:exec_result' %}",
        method: "GET",
        dataType: 'json',
        data: {
            param: id,
        },
        timeout: 5000,
    })
    // 通信成功時の処理を記述
    .done(function(response) {
        if(response.list.length==0){
            // 項番作成
            item = parseInt(item ,10);
            var result = item.toString().padStart( 4, '0');
            //HTML要素
            texthtml = ''
            texthtml = texthtml + '<tr class="list_var">';
            texthtml = texthtml + '	<td id="detail"> ';
            texthtml = texthtml + '		<input type="hidden" data-id-format="id_OrderingId-%d-id" data-name-format="OrderingId-%d-id" name="OrderingId-0-id" id="id_OrderingId-0-id">';
            texthtml = texthtml + '		<input type="hidden" class="OrderingDetailId" data-id-format="id_OrderingId-%d-OrderingDetailId" data-name-format="OrderingId-%d-OrderingDetailId" name="OrderingId-0-OrderingDetailId" id="id_OrderingId-0-OrderingDetailId" value="' + id + '">';
            texthtml = texthtml + '	</td>';
            texthtml = texthtml + '	<td class="text-center">';
            texthtml = texthtml + '		<div class="form-check">';
            texthtml = texthtml + '			<input type="checkbox" class="form-check-input position-static" data-id-format="id_OrderingId-%d-DELETE" data-name-format="OrderingId-%d-DELETE" id="id_OrderingId-0-DELETE" name="OrderingId-0-DELETE">';
            texthtml = texthtml + '		</div>';
            texthtml = texthtml + '	</td>';
            texthtml = texthtml + '	<td><input type="tel" class="form-control ResultItemNumber" autocomplete="new-password" style="text-align: right;" data-id-format="id_OrderingId-%d-ResultItemNumber" data-name-format="OrderingId-%d-ResultItemNumber" name="OrderingId-0-ResultItemNumber" id="id_OrderingId-0-ResultItemNumber" value=' + result + '></td>';
            texthtml = texthtml + '	<td><input type="tel" class="form-control ResultDate" autocomplete="new-password" data-id-format="id_OrderingId-%d-ResultDate" data-name-format="OrderingId-%d-ResultDate" name="OrderingId-0-ResultDate" id="id_OrderingId-0-ResultDate" value=""></td>';
            texthtml = texthtml + '	<td><input type="tel" class="form-control ShippingDate" autocomplete="new-password" data-id-format="id_OrderingId-%d-ShippingDate" data-name-format="OrderingId-%d-ShippingDate" name="OrderingId-0-ShippingDate" id="id_OrderingId-0-ShippingDate" value=""></td>';                                  
            texthtml = texthtml + '	<td><input type="tel" step="0.1" class="form-control ShippingVolume text-right" autocomplete="new-password" data-id-format="id_OrderingId-%d-ShippingVolume" data-name-format="OrderingId-%d-ShippingVolume" name="OrderingId-0-ShippingVolume" id="id_OrderingId-0-ShippingVolume" data-empty-val="false" onchange="financial_shipp(this);" value="{{ "0.00" | intcomma }}"></td>';
            texthtml = texthtml + '	<td><input type="tel" class="form-control SlipNumber text-right" autocomplete="new-password" data-id-format="id_OrderingId-%d-SlipNumber" data-name-format="OrderingId-%d-SlipNumber" name="OrderingId-0-SlipNumber" id="id_OrderingId-0-SlipNumber" value={{"" | default_if_none:"" }}></td>';
            texthtml = texthtml + '	<td><input type="text" class="form-control" autocomplete="new-password" data-id-format="id_OrderingId-%d-ResultSummary" data-name-format="OrderingId-%d-ResultSummary"	name="OrderingId-0-ResultSummary" id="id_OrderingId-0-ResultSummary" value={{"" | default_if_none:"" }}></td>';
            texthtml = texthtml + '	<td class="text-center">';
            texthtml = texthtml + '		<div class="form-check">';
            texthtml = texthtml + '			<input type="checkbox" class="form-check-input ResultMoveDiv" data-id-format="id_OrderingId-%d-ResultMoveDiv" data-name-format="OrderingId-%d-ResultMoveDiv" id="id_OrderingId-0-ResultMoveDiv" name="OrderingId-0-ResultMoveDiv">';
            texthtml = texthtml + '		</div>';
            texthtml = texthtml + '	</td>';
            texthtml = texthtml + '	<td class="text-center">';
            texthtml = texthtml + '		<div class="form-check">';
            texthtml = texthtml + '			<input type="checkbox" class="form-check-input ResultGainDiv" data-id-format="id_OrderingId-%d-ResultGainDiv" data-name-format="OrderingId-%d-ResultGainDiv" id="id_OrderingId-0-ResultGainDiv" name="OrderingId-0-ResultGainDiv">';
            texthtml = texthtml + '		</div>';
            texthtml = texthtml + '	</td>';
            texthtml = texthtml + '	<td class="text-center">';
            texthtml = texthtml + '		<div class="form-check">';
            texthtml = texthtml + '			<input type="checkbox" class="form-check-input ResultDecreaseDiv" data-id-format="id_OrderingId-%d-ResultDecreaseDiv" data-name-format="OrderingId-%d-ResultDecreaseDiv" id="id_OrderingId-0-ResultDecreaseDiv" name="OrderingId-0-ResultDecreaseDiv">';
            texthtml = texthtml + '		</div>';
            texthtml = texthtml + '	</td>';
            texthtml = texthtml + '	<td>';
            texthtml = texthtml + '		<span class="list_del"><button type="button" class="btn btn-outline-danger btn-sm">削除</button></span>';
            texthtml = texthtml + '	</td>';
            texthtml = texthtml + '</tr>';
            $('#list').empty();
            $('#list').append(texthtml);
            // Formの値を書き換える
            $('input:hidden[name="OrderingId-TOTAL_FORMS"]').val(1);
            $('input:hidden[name="OrderingId-INITIAL_FORMS"]').val(0);
			// 出荷日datepicker
			var ShippingDate = document.getElementsByClassName('ShippingDate');
			var fp = flatpickr(ShippingDate, {
				'locale': 'ja',
				allowInput: true,
				// onCloseは入力フォームが閉じられた時に発火する
				onClose: (selectedDates, dateStr, instance) => {
					if (selectedDates.length === 1) {
						// プロパティにユーザーが選択した日付を代入
						this.dateProps = selectedDates[0];
					}
				}
			});
			// 実績日datepicker
			var ResultDate = document.getElementsByClassName('ResultDate');
			var fp = flatpickr(ResultDate, {
				'locale': 'ja',
				allowInput: true,
				// onCloseは入力フォームが閉じられた時に発火する
				onClose: (selectedDates, dateStr, instance) => {
					if (selectedDates.length === 1) {
						// プロパティにユーザーが選択した日付を代入
						this.dateProps = selectedDates[0];
					}
				}
			});
        }
        $.each(response.list, function(index, list) {
            texthtml = '';
            texthtml = texthtml + '<tr class="list_var">';
            texthtml = texthtml + '	<td id="detail"> ';
            texthtml = texthtml + '		<input type="hidden" data-id-format="id_OrderingId-%d-id" data-name-format="OrderingId-%d-id" name="OrderingId-' + index + '-id" id="id_OrderingId-' + index + '-id" value=' + list.id + '>';
            texthtml = texthtml + '		<input type="hidden" class="OrderingDetailId" data-id-format="id_OrderingId-%d-OrderingDetailId" data-name-format="OrderingId-%d-OrderingDetailId" name="OrderingId-' + index + '-OrderingDetailId" id="id_OrderingId-' + index + '-OrderingDetailId" value=' + id + '>';
            texthtml = texthtml + '	</td>';
            texthtml = texthtml + '	<td class="text-center">';
            texthtml = texthtml + '		<div class="form-check">';
            texthtml = texthtml + '			<input type="checkbox" class="form-check-input position-static" data-id-format="id_OrderingId-%d-DELETE" data-name-format="OrderingId-%d-DELETE" id="id_OrderingId-' + index + '-DELETE" name="OrderingId-' + index + '-DELETE">';
            texthtml = texthtml + '		</div>';
            texthtml = texthtml + '	</td>';
            texthtml = texthtml + '	<td><input type="tel" class="form-control ResultItemNumber" autocomplete="new-password" style="text-align: right;" data-id-format="id_OrderingId-%d-ResultItemNumber" data-name-format="OrderingId-%d-ResultItemNumber" name="OrderingId-' + index + '-ResultItemNumber" id="id_OrderingId-' + index + '-ResultItemNumber" value="{{"' + list.ResultItemNumber + '"}}"></td>';
            texthtml = texthtml + '	<td><input type="tel" class="form-control ResultDate" autocomplete="new-password" data-id-format="id_OrderingId-%d-ResultDate" data-name-format="OrderingId-%d-ResultDate" name="OrderingId-' + index + '-ResultDate" id="id_OrderingId-' + index + '-ResultDate" value="{{"' + list.ResultDate + '"}}"></td>';
            texthtml = texthtml + '	<td><input type="tel" class="form-control ShippingDate" autocomplete="new-password" data-id-format="id_OrderingId-%d-ShippingDate" data-name-format="OrderingId-%d-ShippingDate" name="OrderingId-' + index + '-ShippingDate" id="id_OrderingId-' + index + '-ShippingDate" value="{{"' + list.ShippingDate + '"}}"></td>';                                  
            texthtml = texthtml + '	<td><input type="tel" step="0.1" class="form-control ShippingVolume text-right" autocomplete="new-password" data-id-format="id_OrderingId-%d-ShippingVolume" data-name-format="OrderingId-%d-ShippingVolume" name="OrderingId-' + index + '-ShippingVolume" id="id_OrderingId-' + index + '-ShippingVolume" onchange="financial_shipp(this);" value="{{"' + list.ShippingVolume + '" | intcomma }}"></td>';
            texthtml = texthtml + '	<td><input type="tel" class="form-control SlipNumber text-right" autocomplete="new-password" data-id-format="id_OrderingId-%d-SlipNumber" data-name-format="OrderingId-%d-SlipNumber" name="OrderingId-' + index + '-SlipNumber" id="id_OrderingId-' + index + '-SlipNumber" value="{{"' + list.SlipNumber + '" | default_if_none:"" }}"></td>';
            texthtml = texthtml + '	<td><input type="text" class="form-control" autocomplete="new-password" data-id-format="id_OrderingId-%d-ResultSummary" data-name-format="OrderingId-%d-ResultSummary"	name="OrderingId-' + index + '-ResultSummary" id="id_OrderingId-' + index + '-ResultSummary" value="{{"' + list.ResultSummary + '" | default_if_none:"" }}"></td>';
            texthtml = texthtml + '	<td class="text-center">';
            texthtml = texthtml + '		<div class="form-check">';
            if(list.ResultMoveDiv===true){
                texthtml = texthtml + '			<input type="checkbox" class="form-check-input position-static ResultMoveDiv" data-id-format="id_OrderingId-%d-ResultMoveDiv" data-name-format="OrderingId-%d-ResultMoveDiv" id="id_OrderingId-' + index + '-ResultMoveDiv" name="OrderingId-' + index + '-ResultMoveDiv" checked="checked">';
            }else{
                texthtml = texthtml + '			<input type="checkbox" class="form-check-input position-static ResultMoveDiv" data-id-format="id_OrderingId-%d-ResultMoveDiv" data-name-format="OrderingId-%d-ResultMoveDiv" id="id_OrderingId-' + index + '-ResultMoveDiv" name="OrderingId-' + index + '-ResultMoveDiv">';
            }
            texthtml = texthtml + '		</div>';
            texthtml = texthtml + '	</td>';
            texthtml = texthtml + '	<td class="text-center">';
            texthtml = texthtml + '		<div class="form-check">';
            if(list.ResultGainDiv===true){
                texthtml = texthtml + '			<input type="checkbox" class="form-check-input position-static ResultGainDiv" data-id-format="id_OrderingId-%d-ResultGainDiv" data-name-format="OrderingId-%d-ResultGainDiv" id="id_OrderingId-' + index + '-ResultGainDiv" name="OrderingId-' + index + '-ResultGainDiv" checked="checked">';
            }else{
                texthtml = texthtml + '			<input type="checkbox" class="form-check-input position-static ResultGainDiv" data-id-format="id_OrderingId-%d-ResultGainDiv" data-name-format="OrderingId-%d-ResultGainDiv" id="id_OrderingId-' + index + '-ResultGainDiv" name="OrderingId-' + index + '-ResultGainDiv">';

            }
            texthtml = texthtml + '		</div>';
            texthtml = texthtml + '	</td>';
            texthtml = texthtml + '	<td class="text-center">';
            texthtml = texthtml + '		<div class="form-check">';
            if(list.ResultDecreaseDiv===true){
                texthtml = texthtml + '			<input type="checkbox" class="form-check-input position-static ResultDecreaseDiv" data-id-format="id_OrderingId-%d-ResultDecreaseDiv" data-name-format="OrderingId-%d-ResultDecreaseDiv" id="id_OrderingId-' + index + '-ResultDecreaseDiv" name="OrderingId-' + index + '-ResultDecreaseDiv"  checked="checked">';
            }else{
                texthtml = texthtml + '			<input type="checkbox" class="form-check-input position-static ResultDecreaseDiv" data-id-format="id_OrderingId-%d-ResultDecreaseDiv" data-name-format="OrderingId-%d-ResultDecreaseDiv" id="id_OrderingId-' + index + '-ResultDecreaseDiv" name="OrderingId-' + index + '-ResultDecreaseDiv">';
            }
            texthtml = texthtml + '		</div>';
            texthtml = texthtml + '	</td>';
            texthtml = texthtml + '	<td>';
            texthtml = texthtml + '		<span class="list_del"><button type="button" class="btn btn-outline-danger btn-sm">削除</button></span>';
            texthtml = texthtml + '	</td>';
            texthtml = texthtml + '</tr>';

            $('#list').append(texthtml);
            // Formの値を書き換える
            $('input:hidden[name="OrderingId-INITIAL_FORMS"]').val([index +1]);
			// 出荷日datepicker
			var ShippingDate = document.getElementsByClassName('ShippingDate');
			var fp = flatpickr(ShippingDate, {
				'locale': 'ja',
				allowInput: true,
				// onCloseは入力フォームが閉じられた時に発火する
				onClose: (selectedDates, dateStr, instance) => {
					if (selectedDates.length === 1) {
						// プロパティにユーザーが選択した日付を代入
						this.dateProps = selectedDates[0];
					}
				}
			});
			// 実績日datepicker
			var ResultDate = document.getElementsByClassName('ResultDate');
			var fp = flatpickr(ResultDate, {
				'locale': 'ja',
				allowInput: true,
				// onCloseは入力フォームが閉じられた時に発火する
				onClose: (selectedDates, dateStr, instance) => {
					if (selectedDates.length === 1) {
						// プロパティにユーザーが選択した日付を代入
						this.dateProps = selectedDates[0];
					}
				}
			});
        });
    })
    .fail(function() {
        // 通信失敗時の処理を記述
        $('#resultGET').text('GET処理失敗.');
    });
})
</script>
{% endblock %}
