{% load static %}
{% load boost %}
{% block content %}
<div class="container-fluid">
	<div class="form-group">
		<div class="text-left">
			<button type="button" id="add" class="btn btn-primary btn-sm addfile">追加</button>
		</div>
		<input type="hidden" name="McdDtuploadid-TOTAL_FORMS" id="id_McdDtuploadid-TOTAL_FORMS">
		<div class="table-responsive table-container">
			<div class="table-sticky-container">
				{{ inlinesfile.management_form }}
				<table class="table table-sticky" id="tblrowfile">
					<thead>
						<tr class="bg-info">
							<th scope="col" class="text-center check">削除</th>
							<th scope="col" class="text-center product">画像表示</th>
							<th scope="col" class="text-center check">&nbsp;&nbsp;</th>
							<th scope="col" class="text-center product">ファイル添付</th>
							<th scope="col" class="text-center check">&nbsp;&nbsp;</th>
							<th scope="col" class="text-center check">&nbsp;&nbsp;</th>
						</tr>
					</thead>
					<tbody id="listfile">
						{% if images|length != 0 %}
						{% for form, image in inlinesfile|zip:images %}
						<tr class="filearea">
							<td class="text-center">
								<div class="form-check">
									<input type="checkbox" class="form-check-input" data-id-format="id_McdDtuploadid-%d-DELETE" data-name-format="McdDtuploadid-%d-DELETE" id="id_McdDtuploadid-0-DELETE" name="McdDtuploadid-0-DELETE">
								</div>
							</td>
							<td class="text-center">
								<button type="button" class="btn btn-secondary btn-sm" data-toggle="tooltip" data-html="true" data-placement="right" title="画像<br><img src={{ image.middle.url }} width='400' height='300' alt style='width: 50px; height: auto;'>">
								<!-- <button type="button" class="btn btn-secondary btn-sm" data-toggle="tooltip" data-html="true" data-placement="right" title="画像<br><img src={{ MEDIA_URL }}>{{ image.picture }}"> -->
								<!-- <button type="button" class="btn btn-secondary btn-sm" data-toggle="tooltip" data-html="true" data-placement="right" title="画像<br><img src='/media/{{ form.uploadPath.value }}' width='400' height='300' alt style='width: 50px; height: auto;'>"> -->
									画像を表示
								</button>
								<!-- <a href="/media/{{ form.uploadPath.value }}" target="_blank" rel="noopener noreferrer">{{ form.uploadPath.value | default_if_none:'' }}</a> -->
							</td>
							<td class="text-center">
								<div class="form-check">
									<input type="checkbox" class="form-check-input" style="display:none" data-id-format="McdDtuploadid-%d-uploadPath-clear_id" data-name-format="McdDtuploadid-%d-uploadPath-clear" name="McdDtuploadid-0-uploadPath-clear" id="McdDtuploadid-0-uploadPath-clear_id">
								</div>
							</td>
							<td>
								<div id="div" class="input-group">
									<label class="input-group-btn">
										<span class="btn btn-outline-primary btn-mb">
											選択
											<input type="file" style="display:none" class="uploadPath" data-id-format="id_McdDtuploadid-%d-uploadPath" data-name-format="McdDtuploadid-%d-uploadPath"
											name="McdDtuploadid-0-uploadPath" id="id_McdDtuploadid-0-uploadPath" accept="image/*">
										</span>
									</label>
									<input type="text" class="form-control" readonly="">
								</div>
							</td>
							<td>
								<div class="form-check">
									<input type="checkbox" style="display:none" class="form-check-input" data-id-format="id_McdDtuploadid-%d-is_Deleted" data-name-format="McdDtuploadid-%d-is_Deleted" name="McdDtuploadid-0-is_Deleted" id="id_McdDtuploadid-0-is_Deleted">
								</div>
							</td>
							<td>
								<span class="delfile"><button type="button" class="btn btn-outline-danger btn-sm">削除</button></span>
							</td>
							{% if form.id.value %}
							<input type="hidden" data-id-format="id_McdDtuploadid-%d-id" data-name-format="McdDtuploadid-%d-id" id="id_McdDtuploadid-0-id" name="McdDtuploadid-0-id"  value="{{ form.id.value }}">
							<input type="hidden" data-id-format="id_McdDtuploadid-%d-McdDtuploadid" data-name-format="McdDtuploadid-%d-McdDtuploadid" name="McdDtuploadid-0-McdDtuploadid" id="id_McdDtuploadid-0-McdDtuploadid" value="{{ form.McdDtuploadid.value }}">
							{% endif %}
						</tr>
						{% endfor %}
						{% else %}
						<tr class="filearea">
							<td class="text-center">
								<div class="form-check">
									<input type="checkbox" class="form-check-input" data-id-format="id_McdDtuploadid-%d-DELETE" data-name-format="McdDtuploadid-%d-DELETE" id="id_McdDtuploadid-0-DELETE" name="McdDtuploadid-0-DELETE">
								</div>
							</td>
							<td class="text-center">
								<!-- <button type="button" class="btn btn-secondary btn-sm" data-toggle="tooltip" data-html="true" title="画像<br><img src='#'>">
									Tooltip
								</button> -->
								<!-- <a href="/media/{{ form.uploadPath.value }}" target="_blank" rel="noopener noreferrer">{{ form.uploadPath.value | default_if_none:'' }}</a> -->
							</td>
							<td class="text-center">
								<div class="form-check">
									<input type="checkbox" class="form-check-input" style="display:none" data-id-format="McdDtuploadid-%d-uploadPath-clear_id" data-name-format="McdDtuploadid-%d-uploadPath-clear" name="McdDtuploadid-0-uploadPath-clear" id="McdDtuploadid-0-uploadPath-clear_id">
								</div>
							</td>
							<td>
								<div id="div" class="input-group">
									<label class="input-group-btn">
										<span class="btn btn-outline-primary btn-mb">
											選択
											<input type="file" style="display:none" class="uploadPath" data-id-format="id_McdDtuploadid-%d-uploadPath" data-name-format="McdDtuploadid-%d-uploadPath"
											name="McdDtuploadid-0-uploadPath" id="id_McdDtuploadid-0-uploadPath" accept="image/*">
										</span>
									</label>
									<input type="text" class="form-control" readonly="">
								</div>
							</td>
							<td>
								<div class="form-check">
									<input type="checkbox" style="display:none" class="form-check-input" data-id-format="id_McdDtuploadid-%d-is_Deleted" data-name-format="McdDtuploadid-%d-is_Deleted" name="McdDtuploadid-0-is_Deleted" id="id_McdDtuploadid-0-is_Deleted">
								</div>
							</td>
							<td>
								<span class="delfile"><button type="button" class="btn btn-outline-danger btn-sm">削除</button></span>
							</td>
							{% if form.id.value %}
							<input type="hidden" data-id-format="id_McdDtuploadid-%d-id" data-name-format="McdDtuploadid-%d-id" id="id_McdDtuploadid-0-id" name="McdDtuploadid-0-id"  value="{{ form.id.value }}">
							<input type="hidden" data-id-format="id_McdDtuploadid-%d-McdDtuploadid" data-name-format="McdDtuploadid-%d-McdDtuploadid" name="McdDtuploadid-0-McdDtuploadid" id="id_McdDtuploadid-0-McdDtuploadid" value="{{ form.McdDtuploadid.value }}">
							{% endif %}
						</tr>
						{% endif %}
					</tbody>
				</table>
			</div>
		</div>
	</div>
</div>
{% endblock %}
{% block extrajs %}
<!-- addinputarea -->
<script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/jquery.add-input-area@4.11.0/dist/jquery.add-input-area.min.js" integrity="sha256-yOwGvcRp3I8/XWkeARhJkgdfLREQygbFA5W2bUpM2FY=" crossorigin="anonymous"></script>
<script>
	$(document).on('change', ':file', function() {
		var input = $(this),
		numFiles = input.get(0).files ? input.get(0).files.length : 1,
		label = input.val().replace(/\\/g, '/').replace(/.*\//, '');
		input.parent().parent().next(':text').val(label);
	});
</script>
<script>
	$(function () {
		$('[data-toggle="tooltip"]').tooltip()
	})
</script>
{% load static %}
<script src="{% static '\js\commamerchandise.js' %}" charset="UTF-8"></script>
<script src="{% static '\js\inputareamcd.js' %}" charset="UTF-8"></script>
<script src="{% static '\js\tab.js' %}" charset="UTF-8"></script>
<script src="{% static '\js\enter.js' %}" charset="UTF-8"></script>
{% endblock %}
